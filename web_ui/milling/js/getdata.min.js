let m_url_hserver="http://"+location.host.split(":")[0]+":3338";let m_settings={url:m_url_hserver+"",method:"GET",dataType:"json",contentType:"application/x-www-form-urlencoded"};$(document).ready(()=>{refreshData_basic();refreshData_basic2();refreshData_pos();setInterval(()=>{refreshData_basic()},10*1e3);setInterval(()=>{refreshData_basic2()},2*1e3);setInterval(()=>{refreshData_pos()},500)});function refreshData_basic(){let e=$.extend(true,{},m_settings);e.url+="/api/milling/status";let t=$.extend(true,{},m_settings);t.url+="/api/milling/mode";let s=$.extend(true,{},m_settings);s.url+="/api/milling/fname";let a;a=$.ajax(e);a.done(e=>{$("#cnc-status").text("Status："+e.status)});a=$.ajax(t);a.done(e=>{$("#cnc-mode").text("Mode："+e.mode)});a=$.ajax(s);a.done(e=>{$("#cnc-fname").text("File Name："+e.fname)});$("#cnc-status").removeClass("alert-danger").addClass("alert-success");a.fail((e,t,s)=>{$("#cnc-status").removeClass("alert-success").addClass("alert-danger");$("#cnc-status").text("Status：NOT READY");$("#cnc-mode").text("Mode：???");$("#cnc-fname").text("File Name：O????.nc");debug_console(e,t,s)})}function refreshData_basic2(){let e=$.extend(true,{},m_settings);e.url+="/api/milling/feedrate";let t=$.extend(true,{},m_settings);t.url+="/api/milling/spindlespeed";let s;s=$.ajax(e);s.done(e=>{$("#cnc-feedrate").text("Feedrate："+parseInt(e.current.value)/1e3+" mm/min")});s=$.ajax(t);s.done(e=>{$("#cnc-spdspeed").text("Spindle Speed："+e.current.value+" RPM")});s.fail((e,t,s)=>{$("#cnc-feedrate").text("Feedrate：????? mm/min");$("#cnc-spdspeed").text("Spindle Speed：????? RPM");debug_console(e,t,s)})}function refreshData_pos(){let e=$.extend(true,{},m_settings);e.url+="/api/milling/pos";let t;t=$.ajax(e);t.done(e=>{$("#pos-x-abs").text(e.abs.x);$("#pos-x-rel").text(e.rel.x);$("#pos-x-mach").text(e.mach.x);$("#pos-y-abs").text(e.abs.y);$("#pos-y-rel").text(e.rel.y);$("#pos-y-mach").text(e.mach.y);$("#pos-z-abs").text(e.abs.z);$("#pos-z-rel").text(e.rel.z);$("#pos-z-mach").text(e.mach.z);$("#pos-a-abs").text(e.abs.a);$("#pos-a-rel").text(e.rel.a);$("#pos-a-mach").text(e.mach.a);$("#pos-b-abs").text(e.abs.b);$("#pos-b-rel").text(e.rel.b);$("#pos-b-mach").text(e.mach.b);$("#pos-c-abs").text(e.abs.c);$("#pos-c-rel").text(e.rel.c);$("#pos-c-mach").text(e.mach.c)});t.fail((e,t,s)=>{$("#pos-x-abs").text("????????");$("#pos-x-rel").text("????????");$("#pos-x-mach").text("????????");$("#pos-y-abs").text("????????");$("#pos-y-rel").text("????????");$("#pos-y-mach").text("????????");$("#pos-z-abs").text("????????");$("#pos-z-rel").text("????????");$("#pos-z-mach").text("????????");$("#pos-a-abs").text("????????");$("#pos-a-rel").text("????????");$("#pos-a-mach").text("????????");$("#pos-b-abs").text("????????");$("#pos-b-rel").text("????????");$("#pos-b-mach").text("????????");$("#pos-c-abs").text("????????");$("#pos-c-rel").text("????????");$("#pos-c-mach").text("????????");debug_console(e,t,s)})}function debug_console(e,t,s){console.log("XMLHttpRequest.status:"+e.status);console.log("XMLHttpRequest.readyState:"+e.readyState);console.log("textStatus:"+t)}